{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/utils/chat.ts"],"sourcesContent":["/**\n * Chat Utilities - Pure functions for chat operations\n * No side effects; all functions are deterministic and testable\n */\n\n/**\n * Validates a chat message before sending.\n * Rules:\n * - Must not be empty\n * - Must not be only whitespace\n * - Must not exceed max length\n * @param message - Message content to validate\n * @param maxLength - Maximum message length (default: 5000)\n * @returns Object with valid flag and error message if invalid\n */\nexport function validateMessage(message: string, maxLength = 5000): {\n  valid: boolean;\n  error?: string;\n} {\n  if (!message) {\n    return { valid: false, error: 'Message cannot be empty' };\n  }\n\n  const trimmed = message.trim();\n  if (trimmed.length === 0) {\n    return { valid: false, error: 'Message cannot be only whitespace' };\n  }\n\n  if (trimmed.length > maxLength) {\n    return {\n      valid: false,\n      error: `Message exceeds maximum length of ${maxLength} characters`,\n    };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Formats an ISO 8601 timestamp to a human-readable string.\n * Example: \"2026-02-08T10:30:00Z\" -> \"10:30 AM\"\n * @param timestamp - ISO 8601 timestamp string\n * @param includeDate - Include date in output (default: false)\n * @returns Formatted timestamp string\n */\nexport function formatTimestamp(\n  timestamp: string,\n  includeDate = false\n): string {\n  try {\n    const date = new Date(timestamp);\n\n    if (includeDate) {\n      return date.toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n      });\n    }\n\n    return date.toLocaleString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  } catch (error) {\n    return timestamp; // Return original if parsing fails\n  }\n}\n\n/**\n * Generates a UUID v4 string for client-side message IDs.\n * Used to optimistically assign IDs before server confirmation.\n * @returns UUID v4 string\n */\nexport function generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\n * Categorizes HTTP errors and returns appropriate user-facing messages.\n * @param error - Error object with status code\n * @returns Object with error code, message, and suggested action\n */\nexport function handleChatError(error: unknown): {\n  code: string;\n  message: string;\n  action: string;\n} {\n  // Handle fetch/network errors\n  if (error instanceof TypeError) {\n    return {\n      code: 'NETWORK_ERROR',\n      message: 'Network connection failed. Please check your connection.',\n      action: 'retry',\n    };\n  }\n\n  // Handle custom error objects with status\n  if (typeof error === 'object' && error !== null && 'status' in error) {\n    const status = (error as Record<string, unknown>).status;\n\n    if (status === 400) {\n      return {\n        code: 'VALIDATION_ERROR',\n        message:\n          'Invalid message. Please check your input and try again.',\n        action: 'clarify',\n      };\n    }\n\n    if (status === 404) {\n      return {\n        code: 'NOT_FOUND',\n        message:\n          'Conversation not found. It may have been deleted. Start a new conversation.',\n        action: 'new',\n      };\n    }\n\n    if (status === 401) {\n      return {\n        code: 'UNAUTHORIZED',\n        message: 'Your session has expired. Please log in again.',\n        action: 'login',\n      };\n    }\n\n    if (status === 500) {\n      return {\n        code: 'SERVER_ERROR',\n        message:\n          'Server error. Please try again in a moment.',\n        action: 'retry',\n      };\n    }\n\n    if (status === 503) {\n      return {\n        code: 'SERVICE_UNAVAILABLE',\n        message: 'Service temporarily unavailable. Please try again later.',\n        action: 'retry',\n      };\n    }\n  }\n\n  // Handle timeout\n  if (error instanceof Error && error.message.includes('timeout')) {\n    return {\n      code: 'TIMEOUT',\n      message: 'Request took too long. Please try again.',\n      action: 'retry',\n    };\n  }\n\n  // Default unknown error\n  return {\n    code: 'UNKNOWN_ERROR',\n    message: 'An unexpected error occurred. Please try again.',\n    action: 'retry',\n  };\n}\n\n/**\n * Sanitizes message content to prevent XSS attacks.\n * Removes script tags and suspicious HTML.\n * @param content - Message content to sanitize\n * @returns Sanitized content\n */\nexport function sanitizeMessage(content: string): string {\n  // Basic HTML escape for user-provided content\n  const div = document.createElement('div');\n  div.textContent = content;\n  return div.innerHTML;\n}\n\n/**\n * Truncates message content to a reasonable length for display.\n * Used in message previews or lists.\n * @param content - Message content\n * @param maxLength - Maximum display length (default: 100)\n * @returns Truncated content with ellipsis if needed\n */\nexport function truncateMessage(content: string, maxLength = 100): string {\n  if (content.length <= maxLength) {\n    return content;\n  }\n  return content.substring(0, maxLength) + '...';\n}\n\n/**\n * Validates UUID v4 format.\n * Ensures conversation IDs are in valid UUID format before using them.\n * @param uuid - String to validate\n * @returns true if valid UUID v4 format, false otherwise\n */\nexport function isValidUUID(uuid: string): boolean {\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n  return uuidRegex.test(uuid);\n}\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;;;;;;;;CASC;;;;;;;;;;;;;;;;AACM,SAAS,gBAAgB,OAAe,EAAE,YAAY,IAAI;IAI/D,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,OAAO;YAAO,OAAO;QAA0B;IAC1D;IAEA,MAAM,UAAU,QAAQ,IAAI;IAC5B,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,OAAO;YAAE,OAAO;YAAO,OAAO;QAAoC;IACpE;IAEA,IAAI,QAAQ,MAAM,GAAG,WAAW;QAC9B,OAAO;YACL,OAAO;YACP,OAAO,CAAC,kCAAkC,EAAE,UAAU,WAAW,CAAC;QACpE;IACF;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AASO,SAAS,gBACd,SAAiB,EACjB,cAAc,KAAK;IAEnB,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QAEtB,IAAI,aAAa;YACf,OAAO,KAAK,cAAc,CAAC,SAAS;gBAClC,MAAM;gBACN,OAAO;gBACP,KAAK;gBACL,MAAM;gBACN,QAAQ;YACV;QACF;QAEA,OAAO,KAAK,cAAc,CAAC,SAAS;YAClC,MAAM;YACN,QAAQ;QACV;IACF,EAAE,OAAO,OAAO;QACd,OAAO,WAAW,mCAAmC;IACvD;AACF;AAOO,SAAS;IACd,OAAO,uCAAuC,OAAO,CAAC,SAAS,CAAC;QAC9D,MAAM,IAAI,AAAC,KAAK,MAAM,KAAK,KAAM;QACjC,MAAM,IAAI,MAAM,MAAM,IAAI,AAAC,IAAI,MAAO;QACtC,OAAO,EAAE,QAAQ,CAAC;IACpB;AACF;AAOO,SAAS,gBAAgB,KAAc;IAK5C,8BAA8B;IAC9B,IAAI,iBAAiB,WAAW;QAC9B,OAAO;YACL,MAAM;YACN,SAAS;YACT,QAAQ;QACV;IACF;IAEA,0CAA0C;IAC1C,IAAI,OAAO,UAAU,YAAY,UAAU,QAAQ,YAAY,OAAO;QACpE,MAAM,SAAS,AAAC,MAAkC,MAAM;QAExD,IAAI,WAAW,KAAK;YAClB,OAAO;gBACL,MAAM;gBACN,SACE;gBACF,QAAQ;YACV;QACF;QAEA,IAAI,WAAW,KAAK;YAClB,OAAO;gBACL,MAAM;gBACN,SACE;gBACF,QAAQ;YACV;QACF;QAEA,IAAI,WAAW,KAAK;YAClB,OAAO;gBACL,MAAM;gBACN,SAAS;gBACT,QAAQ;YACV;QACF;QAEA,IAAI,WAAW,KAAK;YAClB,OAAO;gBACL,MAAM;gBACN,SACE;gBACF,QAAQ;YACV;QACF;QAEA,IAAI,WAAW,KAAK;YAClB,OAAO;gBACL,MAAM;gBACN,SAAS;gBACT,QAAQ;YACV;QACF;IACF;IAEA,iBAAiB;IACjB,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;QAC/D,OAAO;YACL,MAAM;YACN,SAAS;YACT,QAAQ;QACV;IACF;IAEA,wBAAwB;IACxB,OAAO;QACL,MAAM;QACN,SAAS;QACT,QAAQ;IACV;AACF;AAQO,SAAS,gBAAgB,OAAe;IAC7C,8CAA8C;IAC9C,MAAM,MAAM,SAAS,aAAa,CAAC;IACnC,IAAI,WAAW,GAAG;IAClB,OAAO,IAAI,SAAS;AACtB;AASO,SAAS,gBAAgB,OAAe,EAAE,YAAY,GAAG;IAC9D,IAAI,QAAQ,MAAM,IAAI,WAAW;QAC/B,OAAO;IACT;IACA,OAAO,QAAQ,SAAS,CAAC,GAAG,aAAa;AAC3C;AAQO,SAAS,YAAY,IAAY;IACtC,MAAM,YAAY;IAClB,OAAO,UAAU,IAAI,CAAC;AACxB"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/constants/chat.ts"],"sourcesContent":["/**\n * Chat Constants - Configuration and message templates\n */\n\n// API Configuration\nexport const API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000';\nexport const CHAT_ENDPOINT = '/api/chat';\nexport const CHAT_API_URL = `${API_BASE_URL}${CHAT_ENDPOINT}`;\n\n// Timeouts and Limits (milliseconds)\nexport const REQUEST_TIMEOUT_MS = 30000; // 30 seconds\nexport const LOADING_FEEDBACK_MS = 500; // Show loading indicator after 500ms\nexport const MAX_MESSAGE_LENGTH = 5000;\nexport const RETRY_DELAY_MS = 1000;\nexport const MAX_RETRIES = 3;\n\n// Error Message Templates\nexport const ERROR_MESSAGES = {\n  EMPTY_MESSAGE: 'Message cannot be empty',\n  MESSAGE_TOO_LONG: 'Message exceeds maximum length',\n  NETWORK_ERROR: 'Network connection failed. Please check your connection.',\n  TIMEOUT: 'Request took too long. Please try again.',\n  VALIDATION_ERROR: 'Invalid message. Please check your input and try again.',\n  NOT_FOUND:\n    'Conversation not found. It may have been deleted. Start a new conversation.',\n  UNAUTHORIZED: 'Your session has expired. Please log in again.',\n  SERVER_ERROR: 'Server error. Please try again in a moment.',\n  SERVICE_UNAVAILABLE: 'Service temporarily unavailable. Please try again later.',\n  UNKNOWN_ERROR: 'An unexpected error occurred. Please try again.',\n  CONVERSATION_LOAD_FAILED: 'Failed to load conversation. Please try again.',\n} as const;\n\n// Success Message Templates\nexport const SUCCESS_MESSAGES = {\n  MESSAGE_SENT: 'Message sent',\n  CONVERSATION_CREATED: 'New conversation started',\n  CONVERSATION_LOADED: 'Conversation loaded',\n} as const;\n\n// Loading State Messages\nexport const LOADING_MESSAGES = {\n  SENDING: 'Sending message...',\n  LOADING_HISTORY: 'Loading conversation history...',\n  PROCESSING: 'Processing...',\n} as const;\n\n// UI Configuration\nexport const UI_CONFIG = {\n  ANIMATION_DURATION_MS: 300,\n  TOAST_DURATION_MS: 5000,\n  LOADING_SPINNER_SIZE: 'md' as const,\n  INPUT_PLACEHOLDER: 'Type your message here...',\n  SEND_BUTTON_TEXT: 'Send',\n  SENDING_BUTTON_TEXT: 'Sending...',\n} as const;\n\n// T031: Phase II Design System Colors\nexport const DESIGN_SYSTEM_COLORS = {\n  primary: 'blue-500',\n  secondary: 'gray-500',\n  success: 'green-500',\n  error: 'red-500',\n  warning: 'yellow-500',\n} as const;\n\n// Message Role Colors (Tailwind CSS classes) - T031: Design system\nexport const MESSAGE_ROLE_COLORS = {\n  user: 'bg-blue-100 text-blue-900 rounded-lg',\n  assistant: 'bg-gray-100 text-gray-900 rounded-lg',\n  system: 'bg-yellow-50 text-yellow-800 rounded-lg',\n} as const;\n\n// Message Role Alignment - T031: Consistent spacing\nexport const MESSAGE_ROLE_ALIGNMENT = {\n  user: 'justify-end',\n  assistant: 'justify-start',\n  system: 'justify-center',\n} as const;\n\n// T031: Design system spacing and typography\nexport const DESIGN_SYSTEM_SPACING = {\n  xs: '0.25rem',\n  sm: '0.5rem',\n  md: '1rem',\n  lg: '1.5rem',\n  xl: '2rem',\n} as const;\n\nexport const DESIGN_SYSTEM_TYPOGRAPHY = {\n  body: 'text-sm text-gray-900',\n  caption: 'text-xs text-gray-600',\n  heading: 'text-lg font-bold text-gray-900',\n} as const;\n\n// T031: Design system border styles\nexport const DESIGN_SYSTEM_BORDERS = {\n  light: 'border border-gray-200',\n  medium: 'border border-gray-300',\n  dark: 'border border-gray-400',\n} as const;\n\n// Local Storage Keys\nexport const STORAGE_KEYS = {\n  LAST_CONVERSATION_ID: 'chat_last_conversation_id',\n  CONVERSATIONS_CACHE: 'chat_conversations_cache',\n  USER_PREFERENCES: 'chat_user_preferences',\n} as const;\n\n// Feature Flags (for gradual rollout)\nexport const FEATURE_FLAGS = {\n  ENABLE_TOOL_DISPLAY: false, // Hide tool invocations by default\n  ENABLE_DEBUG_MODE: false, // Show debug info\n  ENABLE_STREAMING: true, // Stream responses\n  ENABLE_CONVERSATION_HISTORY: true, // Load previous conversations\n} as const;\n"],"names":[],"mappings":"AAAA;;CAEC,GAED,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACb,MAAM,eACX,6DAAwC;AACnC,MAAM,gBAAgB;AACtB,MAAM,eAAe,GAAG,eAAe,eAAe;AAGtD,MAAM,qBAAqB,OAAO,aAAa;AAC/C,MAAM,sBAAsB,KAAK,qCAAqC;AACtE,MAAM,qBAAqB;AAC3B,MAAM,iBAAiB;AACvB,MAAM,cAAc;AAGpB,MAAM,iBAAiB;IAC5B,eAAe;IACf,kBAAkB;IAClB,eAAe;IACf,SAAS;IACT,kBAAkB;IAClB,WACE;IACF,cAAc;IACd,cAAc;IACd,qBAAqB;IACrB,eAAe;IACf,0BAA0B;AAC5B;AAGO,MAAM,mBAAmB;IAC9B,cAAc;IACd,sBAAsB;IACtB,qBAAqB;AACvB;AAGO,MAAM,mBAAmB;IAC9B,SAAS;IACT,iBAAiB;IACjB,YAAY;AACd;AAGO,MAAM,YAAY;IACvB,uBAAuB;IACvB,mBAAmB;IACnB,sBAAsB;IACtB,mBAAmB;IACnB,kBAAkB;IAClB,qBAAqB;AACvB;AAGO,MAAM,uBAAuB;IAClC,SAAS;IACT,WAAW;IACX,SAAS;IACT,OAAO;IACP,SAAS;AACX;AAGO,MAAM,sBAAsB;IACjC,MAAM;IACN,WAAW;IACX,QAAQ;AACV;AAGO,MAAM,yBAAyB;IACpC,MAAM;IACN,WAAW;IACX,QAAQ;AACV;AAGO,MAAM,wBAAwB;IACnC,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AAEO,MAAM,2BAA2B;IACtC,MAAM;IACN,SAAS;IACT,SAAS;AACX;AAGO,MAAM,wBAAwB;IACnC,OAAO;IACP,QAAQ;IACR,MAAM;AACR;AAGO,MAAM,eAAe;IAC1B,sBAAsB;IACtB,qBAAqB;IACrB,kBAAkB;AACpB;AAGO,MAAM,gBAAgB;IAC3B,qBAAqB;IACrB,mBAAmB;IACnB,kBAAkB;IAClB,6BAA6B;AAC/B"}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/src/auth/auth-utils.ts"],"sourcesContent":["/**\n * Authentication utilities for Better Auth integration.\n * Tokens are stored in localStorage after login for use with the backend API.\n */\n\nconst TOKEN_KEY = 'auth-token';\nconst SESSION_KEY = 'auth-session';\n\n/**\n * Gets the JWT token stored after login.\n */\nexport const getToken = async (): Promise<string | null> => {\n  try {\n    if (typeof window !== 'undefined') {\n      return localStorage.getItem(TOKEN_KEY);\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting token:', error);\n    return null;\n  }\n};\n\n/**\n * Stores the JWT token after successful login.\n */\nexport const setToken = (token: string): void => {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(TOKEN_KEY, token);\n  }\n};\n\n/**\n * Stores the session data after successful login.\n */\nexport const setSession = (session: any): void => {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(SESSION_KEY, JSON.stringify(session));\n  }\n};\n\n/**\n * Gets the stored session data.\n */\nexport const getSession = (): any | null => {\n  try {\n    if (typeof window !== 'undefined') {\n      const data = localStorage.getItem(SESSION_KEY);\n      return data ? JSON.parse(data) : null;\n    }\n    return null;\n  } catch {\n    return null;\n  }\n};\n\n/**\n * Checks if the current user is authenticated.\n */\nexport const isAuthenticated = async (): Promise<boolean> => {\n  const token = await getToken();\n  if (!token) return false;\n  return !isTokenExpired(token);\n};\n\n/**\n * Checks if a JWT token is expired.\n */\nexport const isTokenExpired = (token: string): boolean => {\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 3) return true;\n\n    const base64 = parts[1].replace(/-/g, '+').replace(/_/g, '/');\n    const payload = JSON.parse(atob(base64));\n    const currentTime = Math.floor(Date.now() / 1000);\n    return payload.exp < currentTime;\n  } catch {\n    return true;\n  }\n};\n\n/**\n * Clears all authentication data.\n */\nexport const clearAuthSession = (): void => {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(SESSION_KEY);\n  }\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;;CAGC,GAED,MAAM,YAAY;AAClB,MAAM,cAAc;AAKb,MAAM,WAAW;IACtB,IAAI;QACF;;QAGA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;IACT;AACF;AAKO,MAAM,WAAW,CAAC;IACvB;;AAGF;AAKO,MAAM,aAAa,CAAC;IACzB;;AAGF;AAKO,MAAM,aAAa;IACxB,IAAI;QACF;;QAIA,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,MAAM,kBAAkB;IAC7B,MAAM,QAAQ,MAAM;IACpB,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,CAAC,eAAe;AACzB;AAKO,MAAM,iBAAiB,CAAC;IAC7B,IAAI;QACF,MAAM,QAAQ,MAAM,KAAK,CAAC;QAC1B,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;QAE/B,MAAM,SAAS,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM;QACzD,MAAM,UAAU,KAAK,KAAK,CAAC,KAAK;QAChC,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;QAC5C,OAAO,QAAQ,GAAG,GAAG;IACvB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,MAAM,mBAAmB;IAC9B;;AAIF"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/hooks/useChat.ts"],"sourcesContent":["/**\n * useChat Hook - Main API client hook for chat operations\n * Handles message sending, conversation loading, error management, and state\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport type {\n  ChatMessage,\n  Conversation,\n  ChatRequest,\n  ChatResponse,\n  UseChatReturn,\n} from '@/types/chat';\nimport {\n  validateMessage,\n  handleChatError,\n  generateUUID,\n  isValidUUID,\n} from '@/utils/chat';\nimport {\n  CHAT_API_URL,\n  REQUEST_TIMEOUT_MS,\n  ERROR_MESSAGES,\n  STORAGE_KEYS,\n} from '@/constants/chat';\nimport { getToken } from '@/src/auth/auth-utils';\n\n/**\n * Main chat hook for sending messages and managing conversation state\n * @returns Chat state and methods\n */\nexport const useChat = (): UseChatReturn => {\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  /**\n   * Clear error state\n   */\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  /**\n   * Send a message to the API and update conversation state\n   * @param message - Message content to send\n   */\n  const sendMessage = useCallback(\n    async (message: string) => {\n      // Validate input\n      const validation = validateMessage(message);\n      if (!validation.valid) {\n        setError(validation.error || ERROR_MESSAGES.EMPTY_MESSAGE);\n        return;\n      }\n\n      clearError();\n      setIsLoading(true);\n\n      try {\n        // Create optimistic message for UI\n        const userMessage: ChatMessage = {\n          id: generateUUID(),\n          role: 'user',\n          content: message.trim(),\n          createdAt: new Date().toISOString(),\n          isLoading: false,\n        };\n\n        // Update conversation with user message\n        const updatedConversation: Conversation = {\n          ...(conversation || {\n            id: '',\n            messages: [],\n            isLoading: false,\n            createdAt: new Date().toISOString(),\n          }),\n          messages: [...(conversation?.messages || []), userMessage],\n          lastMessageAt: new Date().toISOString(),\n        };\n\n        setConversation(updatedConversation);\n        setInputValue(''); // Clear input immediately\n\n        // Add loading message\n        const loadingMessage: ChatMessage = {\n          id: generateUUID(),\n          role: 'assistant',\n          content: 'Typing...',\n          createdAt: new Date().toISOString(),\n          isLoading: true,\n        };\n\n        setConversation((prev) =>\n          prev\n            ? {\n                ...prev,\n                messages: [...prev.messages, loadingMessage],\n              }\n            : null\n        );\n\n        // Build request payload\n        const request: ChatRequest = {\n          message: message.trim(),\n          conversation_id: conversation?.id,\n        };\n\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(\n          () => controller.abort(),\n          REQUEST_TIMEOUT_MS\n        );\n\n        try {\n          // Get JWT token from localStorage (same as apiClient)\n          const token = await getToken();\n\n          console.log('ðŸ” Token retrieval:', {\n            tokenFound: !!token,\n            tokenLength: token ? token.length : 0\n          });\n\n          // Build headers\n          const headers: any = {\n            'Content-Type': 'application/json',\n          };\n\n          // Add JWT token if available\n          if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n            console.log('âœ“ Authorization header set with Bearer token');\n          } else {\n            console.warn('âš ï¸ No token found in localStorage');\n          }\n\n          // Call API\n          const response = await fetch(CHAT_API_URL, {\n            method: 'POST',\n            headers,\n            body: JSON.stringify(request),\n            signal: controller.signal,\n            credentials: 'include', // Include cookies for authentication\n          });\n\n          clearTimeout(timeoutId);\n\n          // Handle error responses\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            const errorObj = {\n              status: response.status,\n              ...errorData,\n            };\n\n            const { message: errorMessage } = handleChatError(errorObj);\n            throw new Error(errorMessage);\n          }\n\n          // Parse response\n          const data: ChatResponse = await response.json();\n\n          // Create assistant message\n          const assistantMessage: ChatMessage = {\n            id: generateUUID(),\n            role: 'assistant',\n            content: data.response,\n            toolName: data.toolName,\n            toolResult: data.toolResult,\n            createdAt: new Date().toISOString(),\n            isLoading: false,\n          };\n\n          // Update conversation with response\n          setConversation((prev) => {\n            if (!prev) {\n              return null;\n            }\n\n            // Replace loading message with actual response\n            const messages = prev.messages.slice(0, -1); // Remove loading message\n            messages.push(assistantMessage);\n\n            return {\n              ...prev,\n              id: data.conversation_id, // Update conversation ID if new\n              messages,\n              lastMessageAt: new Date().toISOString(),\n            };\n          });\n\n          // Save conversation ID and metadata to localStorage (T023)\n          if (data.conversation_id) {\n            try {\n              localStorage.setItem(\n                STORAGE_KEYS.LAST_CONVERSATION_ID,\n                JSON.stringify({\n                  id: data.conversation_id,\n                  lastAccessedAt: new Date().toISOString(),\n                })\n              );\n            } catch (storageError) {\n              // localStorage might be full or unavailable; fail silently\n              console.warn('Failed to save conversation to localStorage:', storageError);\n            }\n          }\n        } catch (fetchError) {\n          clearTimeout(timeoutId);\n\n          // Remove loading message on error\n          setConversation((prev) =>\n            prev\n              ? {\n                  ...prev,\n                  messages: prev.messages.slice(0, -1),\n                }\n              : null\n          );\n\n          if (fetchError instanceof Error) {\n            if (fetchError.name === 'AbortError') {\n              setError(ERROR_MESSAGES.TIMEOUT);\n            } else {\n              setError(fetchError.message);\n            }\n          } else {\n            setError(ERROR_MESSAGES.UNKNOWN_ERROR);\n          }\n        }\n      } catch (err) {\n        const { message: errorMessage } = handleChatError(err);\n        setError(errorMessage);\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [conversation, clearError]\n  );\n\n  /**\n   * Load conversation history from the backend\n   * @param conversationId - ID of conversation to load\n   * @returns Promise that resolves when conversation is loaded or error occurs\n   */\n  const loadConversationHistory = useCallback(\n    async (conversationId: string): Promise<ChatMessage[]> => {\n      // Validate conversation ID format\n      if (!conversationId || !isValidUUID(conversationId)) {\n        setError(ERROR_MESSAGES.NOT_FOUND);\n        return [];\n      }\n\n      setIsLoading(true);\n      clearError();\n\n      try {\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(\n          () => controller.abort(),\n          REQUEST_TIMEOUT_MS\n        );\n\n        try {\n          // Get JWT token from localStorage\n          const token = await getToken();\n\n          // Build headers with authorization\n          const headers: any = {\n            'Content-Type': 'application/json',\n          };\n\n          if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n          }\n\n          // Fetch conversation history from backend\n          // Uses GET request with conversation_id as query parameter\n          const response = await fetch(\n            `${CHAT_API_URL}?conversation_id=${encodeURIComponent(conversationId)}`,\n            {\n              method: 'GET',\n              headers,\n              signal: controller.signal,\n              credentials: 'include', // Include cookies for authentication\n            }\n          );\n\n          clearTimeout(timeoutId);\n\n          // Handle error responses\n          if (!response.ok) {\n            if (response.status === 404) {\n              setError(ERROR_MESSAGES.NOT_FOUND);\n              // Clear invalid conversation from localStorage\n              localStorage.removeItem(STORAGE_KEYS.LAST_CONVERSATION_ID);\n            } else if (response.status === 401) {\n              setError(ERROR_MESSAGES.UNAUTHORIZED);\n            } else {\n              throw new Error(ERROR_MESSAGES.CONVERSATION_LOAD_FAILED);\n            }\n            return [];\n          }\n\n          // Parse response and validate structure\n          const data = await response.json();\n\n          if (data.messages && Array.isArray(data.messages)) {\n            // Create conversation object from loaded data\n            const loadedConversation: Conversation = {\n              id: conversationId,\n              messages: data.messages,\n              isLoading: false,\n              createdAt: data.createdAt || new Date().toISOString(),\n              lastMessageAt: data.lastMessageAt || new Date().toISOString(),\n            };\n\n            setConversation(loadedConversation);\n            return data.messages;\n          }\n\n          return [];\n        } catch (fetchError) {\n          clearTimeout(timeoutId);\n\n          if (fetchError instanceof Error) {\n            if (fetchError.name === 'AbortError') {\n              setError(ERROR_MESSAGES.TIMEOUT);\n            } else {\n              setError(fetchError.message);\n            }\n          } else {\n            setError(ERROR_MESSAGES.CONVERSATION_LOAD_FAILED);\n          }\n          return [];\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [clearError]\n  );\n\n  /**\n   * Get last conversation ID from localStorage with validation\n   * Handles both legacy (string) and new (JSON) formats\n   * @returns Conversation ID if valid, null otherwise\n   */\n  const getLastConversationIdFromStorage = useCallback((): string | null => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.LAST_CONVERSATION_ID);\n      if (!stored) {\n        return null;\n      }\n\n      // Try to parse as JSON (new format: { id, lastAccessedAt })\n      try {\n        const parsed = JSON.parse(stored);\n        if (parsed && typeof parsed === 'object' && 'id' in parsed) {\n          const id = parsed.id as string;\n          return isValidUUID(id) ? id : null;\n        }\n      } catch {\n        // Fall back to legacy string format\n        if (isValidUUID(stored)) {\n          return stored;\n        }\n      }\n\n      return null;\n    } catch {\n      return null;\n    }\n  }, []);\n\n  /**\n   * Load last conversation from localStorage on mount (T023)\n   * Only loads if:\n   * 1. No conversation_id in URL\n   * 2. localStorage has valid last conversation\n   * 3. No existing conversation in state\n   */\n  useEffect(() => {\n    // Note: This effect only runs on mount (empty dependencies)\n    // For URL-based conversation loading, see ChatInterface.tsx\n    if (!conversation) {\n      const lastConversationId = getLastConversationIdFromStorage();\n      if (lastConversationId) {\n        loadConversationHistory(lastConversationId);\n      }\n    }\n  }, []); // Only run on mount\n\n  return {\n    conversation,\n    inputValue,\n    setInputValue,\n    sendMessage,\n    loadConversationHistory,\n    error,\n    isLoading,\n    clearError,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/components/MessageList.tsx"],"sourcesContent":["'use client';\n\n/**\n * MessageList Component\n * Displays messages in chronological order with role-based styling\n * Shows timestamps and loading indicators\n */\n\nimport { formatTimestamp } from '@/utils/chat';\nimport type { ChatMessage } from '@/types/chat';\nimport { MESSAGE_ROLE_ALIGNMENT, MESSAGE_ROLE_COLORS } from '@/constants/chat';\n\ninterface MessageListProps {\n  /** Array of messages to display */\n  messages: ChatMessage[];\n}\n\nexport const MessageList = ({ messages }: MessageListProps) => {\n  return (\n    <div className=\"space-y-4\">\n      {messages.map((message) => (\n        <Message key={message.id} message={message} />\n      ))}\n    </div>\n  );\n};\n\n/**\n * Individual Message Component\n */\ninterface MessageProps {\n  message: ChatMessage;\n}\n\nconst Message = ({ message }: MessageProps) => {\n  const alignmentClass = MESSAGE_ROLE_ALIGNMENT[message.role];\n  const bgColorClass = MESSAGE_ROLE_COLORS[message.role];\n\n  // T033: Responsive message width based on viewport\n  const messageWidthClass =\n    message.role === 'system'\n      ? 'max-w-full'\n      : 'max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg';\n\n  return (\n    <div className={`flex ${alignmentClass}`}>\n      <div\n        className={`${messageWidthClass} px-4 py-3 ${bgColorClass} ${\n          message.role === 'system' ? 'text-center text-sm italic' : ''\n        }`}\n        role=\"article\"\n        aria-label={message.isLoading ? 'Loading response' : 'Message'}\n      >\n        {/* T028: Tool execution progress - show tool name during execution */}\n        {message.isLoading && message.toolName && (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-xs font-medium\">Executing {message.toolName}...</span>\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-100\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-200\" />\n          </div>\n        )}\n\n        {/* Loading indicator without tool name */}\n        {message.isLoading && !message.toolName && (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-100\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-200\" />\n          </div>\n        )}\n\n        {/* Message content */}\n        {!message.isLoading && (\n          <>\n            <p className=\"text-sm break-words\">{message.content}</p>\n\n            {/* T028: Tool result display - show result after execution completes */}\n            {message.toolResult && (\n              <div className=\"mt-2 pt-2 border-t border-current border-opacity-20\">\n                <p className=\"text-xs font-semibold mb-1\">\n                  {message.toolName ? `${message.toolName} Result:` : 'Tool Result:'}\n                </p>\n                <pre className=\"text-xs overflow-x-auto bg-black bg-opacity-10 p-2 rounded\">\n                  {JSON.stringify(message.toolResult, null, 2)}\n                </pre>\n              </div>\n            )}\n\n            {/* Error (if present) */}\n            {message.error && (\n              <div\n                className=\"mt-2 pt-2 border-t border-red-300\"\n                role=\"alert\"\n              >\n                <p className=\"text-xs font-semibold text-red-600\">Error:</p>\n                <p className=\"text-xs text-red-600\">{message.error}</p>\n              </div>\n            )}\n\n            {/* Timestamp */}\n            <p className=\"text-xs opacity-70 mt-1\">\n              {formatTimestamp(message.createdAt)}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;;;;CAIC,GAED;AAEA;AAVA;;;;AAiBO,MAAM,cAAc,CAAC,EAAE,QAAQ,EAAoB;IACxD,qBACE,0PAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,wBACb,0PAAC;gBAAyB,SAAS;eAArB,QAAQ,EAAE;;;;;;;;;;AAIhC;AASA,MAAM,UAAU,CAAC,EAAE,OAAO,EAAgB;IACxC,MAAM,iBAAiB,uJAAsB,CAAC,QAAQ,IAAI,CAAC;IAC3D,MAAM,eAAe,oJAAmB,CAAC,QAAQ,IAAI,CAAC;IAEtD,mDAAmD;IACnD,MAAM,oBACJ,QAAQ,IAAI,KAAK,WACb,eACA;IAEN,qBACE,0PAAC;QAAI,WAAW,CAAC,KAAK,EAAE,gBAAgB;kBACtC,cAAA,0PAAC;YACC,WAAW,GAAG,kBAAkB,WAAW,EAAE,aAAa,CAAC,EACzD,QAAQ,IAAI,KAAK,WAAW,+BAA+B,IAC3D;YACF,MAAK;YACL,cAAY,QAAQ,SAAS,GAAG,qBAAqB;;gBAGpD,QAAQ,SAAS,IAAI,QAAQ,QAAQ,kBACpC,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAK,WAAU;;gCAAsB;gCAAW,QAAQ,QAAQ;gCAAC;;;;;;;sCAClE,0PAAC;4BAAI,WAAU;;;;;;sCACf,0PAAC;4BAAI,WAAU;;;;;;sCACf,0PAAC;4BAAI,WAAU;;;;;;;;;;;;gBAKlB,QAAQ,SAAS,IAAI,CAAC,QAAQ,QAAQ,kBACrC,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAI,WAAU;;;;;;sCACf,0PAAC;4BAAI,WAAU;;;;;;sCACf,0PAAC;4BAAI,WAAU;;;;;;;;;;;;gBAKlB,CAAC,QAAQ,SAAS,kBACjB;;sCACE,0PAAC;4BAAE,WAAU;sCAAuB,QAAQ,OAAO;;;;;;wBAGlD,QAAQ,UAAU,kBACjB,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCAAE,WAAU;8CACV,QAAQ,QAAQ,GAAG,GAAG,QAAQ,QAAQ,CAAC,QAAQ,CAAC,GAAG;;;;;;8CAEtD,0PAAC;oCAAI,WAAU;8CACZ,KAAK,SAAS,CAAC,QAAQ,UAAU,EAAE,MAAM;;;;;;;;;;;;wBAM/C,QAAQ,KAAK,kBACZ,0PAAC;4BACC,WAAU;4BACV,MAAK;;8CAEL,0PAAC;oCAAE,WAAU;8CAAqC;;;;;;8CAClD,0PAAC;oCAAE,WAAU;8CAAwB,QAAQ,KAAK;;;;;;;;;;;;sCAKtD,0PAAC;4BAAE,WAAU;sCACV,IAAA,4IAAe,EAAC,QAAQ,SAAS;;;;;;;;;;;;;;;;;;;AAOhD"}},
    {"offset": {"line": 927, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/components/ChatInput.tsx"],"sourcesContent":["'use client';\n\n/**\n * ChatInput Component\n * Message input field with Send button\n * Handles validation and submission\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { validateMessage } from '@/utils/chat';\nimport { UI_CONFIG, MAX_MESSAGE_LENGTH } from '@/constants/chat';\n\ninterface ChatInputProps {\n  /** Current input value */\n  value: string;\n\n  /** Callback when input changes */\n  onChange: (value: string) => void;\n\n  /** Callback when message is submitted */\n  onSubmit: (message: string) => Promise<void>;\n\n  /** Indicates if waiting for API response */\n  isLoading: boolean;\n\n  /** Disables input and button */\n  disabled?: boolean;\n}\n\nexport const ChatInput = ({\n  value,\n  onChange,\n  onSubmit,\n  isLoading,\n  disabled = false,\n}: ChatInputProps) => {\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    // Validate\n    const validation = validateMessage(value);\n    if (!validation.valid) {\n      setError(validation.error || 'Invalid message');\n      return;\n    }\n\n    setError(null);\n\n    // Submit\n    try {\n      await onSubmit(value);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : 'Failed to send message'\n      );\n    }\n  };\n\n  /**\n   * Handle key press (Enter to send)\n   */\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey && !disabled) {\n      e.preventDefault();\n      const form = inputRef.current?.form;\n      if (form) {\n        form.dispatchEvent(new Event('submit', { bubbles: true }));\n      }\n    }\n  };\n\n  /**\n   * Auto-resize textarea based on content\n   */\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n    }\n  }, [value]);\n\n  /**\n   * Focus input on mount\n   */\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\n      {/* Error display - T032: Accessibility with role=\"alert\" */}\n      {error && (\n        <div\n          className=\"text-sm text-red-600 bg-red-50 px-3 py-2 rounded border border-red-200\"\n          role=\"alert\"\n        >\n          {error}\n        </div>\n      )}\n\n      {/* Input field - T032: Enhanced accessibility */}\n      <div className=\"flex gap-3\">\n        <div className=\"flex-1 relative\">\n          <label htmlFor=\"message-input\" className=\"sr-only\">\n            Message input\n          </label>\n          <textarea\n            ref={inputRef}\n            id=\"message-input\"\n            value={value}\n            onChange={(e) => {\n              onChange(e.target.value);\n              setError(null); // Clear error on new input\n            }}\n            onKeyDown={handleKeyDown}\n            placeholder={UI_CONFIG.INPUT_PLACEHOLDER}\n            disabled={disabled}\n            maxLength={MAX_MESSAGE_LENGTH}\n            rows={1}\n            className={`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all ${\n              disabled\n                ? 'bg-gray-100 text-gray-400 cursor-not-allowed opacity-50'\n                : 'bg-white text-gray-900'\n            } focus:opacity-100`}\n            aria-label=\"Message input\"\n            aria-disabled={disabled}\n            aria-describedby=\"character-count\"\n            data-testid=\"message-input\"\n          />\n        </div>\n\n        {/* Send button - T027, T032: Enhanced button with loading state and accessibility */}\n        <button\n          type=\"submit\"\n          disabled={disabled || !value.trim()}\n          className={`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2 ${\n            disabled || !value.trim()\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 focus:ring-blue-500'\n          }`}\n          aria-label={isLoading ? 'Sending message' : 'Send message'}\n          aria-busy={isLoading}\n          data-testid=\"send-button\"\n        >\n          {isLoading ? (\n            <span className=\"flex items-center gap-2\">\n              <span className=\"inline-block\" aria-hidden=\"true\">\n                <svg\n                  className=\"w-4 h-4 animate-spin\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                  />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n              </span>\n              {UI_CONFIG.SENDING_BUTTON_TEXT}\n            </span>\n          ) : (\n            UI_CONFIG.SEND_BUTTON_TEXT\n          )}\n        </button>\n      </div>\n\n      {/* Character count - T032: Accessibility with aria-live */}\n      <div className=\"flex items-center justify-between\">\n        <p\n          id=\"character-count\"\n          className=\"text-xs text-gray-500\"\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          {value.length}/{MAX_MESSAGE_LENGTH} characters\n        </p>\n        {value.length > MAX_MESSAGE_LENGTH * 0.9 && (\n          <p className=\"text-xs text-yellow-600\" role=\"status\">\n            You are approaching the character limit\n          </p>\n        )}\n      </div>\n\n      {/* Keyboard help text - T032: Accessibility */}\n      <p className=\"text-xs text-gray-400 italic\">\n        Press <kbd className=\"bg-gray-100 px-2 py-1 rounded text-gray-700\">Enter</kbd> to send,{' '}\n        <kbd className=\"bg-gray-100 px-2 py-1 rounded text-gray-700\">Shift+Enter</kbd> for new line\n      </p>\n    </form>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1193, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/components/ChatInterface.tsx"],"sourcesContent":["'use client';\n\n/**\n * ChatInterface Component\n * Main chat UI component that combines MessageList and ChatInput\n * Manages conversation state and auto-scrolling\n */\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useChat } from '@/hooks/useChat';\nimport { MessageList } from '@/components/MessageList';\nimport { ChatInput } from '@/components/ChatInput';\nimport type { Conversation } from '@/types/chat';\n\ninterface ChatInterfaceProps {\n  /** Optional initial conversation ID to load */\n  conversationId?: string;\n}\n\nexport const ChatInterface = ({ conversationId }: ChatInterfaceProps) => {\n  const router = useRouter();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const {\n    conversation,\n    inputValue,\n    setInputValue,\n    sendMessage,\n    loadConversationHistory,\n    error,\n    isLoading,\n    clearError,\n  } = useChat();\n\n  const [hasLoadedHistory, setHasLoadedHistory] = useState(false);\n\n  /**\n   * Load conversation history on component mount or when conversation ID changes (T022)\n   * Handles:\n   * - Loading history when conversationId is provided\n   * - Switching conversations when conversationId URL parameter changes\n   * - Clearing state for new conversations (id=null)\n   * - No duplicate requests via hasLoadedHistory flag\n   */\n  useEffect(() => {\n    // Track if component is still mounted to prevent state updates after unmount\n    let isMounted = true;\n\n    const loadHistory = async () => {\n      if (!conversationId) {\n        // New conversation (no ID) - reset state\n        if (isMounted) {\n          setHasLoadedHistory(false);\n        }\n        return;\n      }\n\n      // Only load if we haven't already loaded this conversation\n      if (hasLoadedHistory && conversation?.id === conversationId) {\n        return;\n      }\n\n      try {\n        // Load conversation history from backend\n        await loadConversationHistory(conversationId);\n\n        if (isMounted) {\n          setHasLoadedHistory(true);\n        }\n      } catch (err) {\n        // Error handling is done in loadConversationHistory\n        if (isMounted) {\n          setHasLoadedHistory(true); // Mark as attempted to prevent retries\n        }\n      }\n    };\n\n    loadHistory();\n\n    // Cleanup on unmount: prevent state updates after unmount\n    return () => {\n      isMounted = false;\n    };\n  }, [conversationId, conversation?.id, hasLoadedHistory, loadConversationHistory]);\n\n  /**\n   * Auto-scroll to bottom when messages change\n   */\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [conversation?.messages]);\n\n  /**\n   * Update URL when conversation ID is established\n   */\n  useEffect(() => {\n    if (conversation?.id && conversation.id !== conversationId) {\n      router.push(`/chat?id=${conversation.id}`, { scroll: false });\n    }\n  }, [conversation?.id, conversationId, router]);\n\n  /**\n   * Handle message submission\n   */\n  const handleSubmit = async (message: string) => {\n    if (message.trim()) {\n      await sendMessage(message);\n    }\n  };\n\n  return (\n    <div\n      className=\"flex flex-col h-[calc(100vh-200px)] bg-white rounded-lg border border-gray-200 shadow-sm\"\n      role=\"region\"\n      aria-label=\"Chat interface\"\n    >\n      {/* Messages Container - T029, T031, T033: Design system styling with responsive design */}\n      <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 bg-gray-50 max-h-screen\">\n        {isLoading && (!conversation || conversation.messages.length === 0) ? (\n          // T026, T030: Loading state while fetching conversation history\n          <div className=\"flex items-center justify-center h-full text-center\">\n            <div>\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600\"></div>\n              </div>\n              <p className=\"text-gray-600 font-medium\">Loading conversation...</p>\n            </div>\n          </div>\n        ) : !conversation || conversation.messages.length === 0 ? (\n          // Empty state for new conversation - T031: Design system\n          <div className=\"flex items-center justify-center h-full text-center\">\n            <div className=\"max-w-md\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-3\">\n                Start a New Conversation\n              </h2>\n              <p className=\"text-gray-600 mb-4\">\n                Chat naturally to manage your tasks. Try asking something like:\n              </p>\n              <ul className=\"text-sm text-gray-500 space-y-1 mb-4\">\n                <li>\"Add a task: buy milk\"</li>\n                <li>\"List all my tasks\"</li>\n                <li>\"Mark task as done\"</li>\n              </ul>\n            </div>\n          </div>\n        ) : (\n          // Display loaded messages - T031: Message styling\n          <>\n            <MessageList messages={conversation.messages} />\n            <div ref={messagesEndRef} />\n          </>\n        )}\n      </div>\n\n      {/* Error Display - T031: Design system error styling */}\n      {error && (\n        <div className=\"px-6 py-4 bg-red-50 border-t border-red-200\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-medium text-red-900\">{error}</p>\n            </div>\n            <button\n              onClick={clearError}\n              className=\"ml-2 inline-flex text-red-400 hover:text-red-600 focus:outline-none transition-colors\"\n              aria-label=\"Close error message\"\n            >\n              <span className=\"sr-only\">Close</span>\n              <svg\n                className=\"h-5 w-5\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Input Container - T027, T029, T031: Enhanced styling and accessibility */}\n      <div className=\"border-t border-gray-200 p-6 bg-white\">\n        <ChatInput\n          value={inputValue}\n          onChange={setInputValue}\n          onSubmit={handleSubmit}\n          isLoading={isLoading}\n          disabled={isLoading}\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1521, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/src/auth/better-auth.ts"],"sourcesContent":["import { createAuthClient } from \"better-auth/client\";\n\nconst authClient = createAuthClient({\n  baseURL: process.env.NEXT_PUBLIC_BETTER_AUTH_URL || \"http://localhost:3000\",\n});\n\nexport default authClient;\nexport { authClient };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,aAAa,IAAA,4LAAgB,EAAC;IAClC,SAAS,6DAA2C;AACtD;uCAEe"}},
    {"offset": {"line": 1539, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/services/auth-service.ts"],"sourcesContent":["// Better Auth service integration\nimport { authClient } from '@/src/auth/better-auth';\nimport { setToken, setSession, clearAuthSession, getSession } from '@/src/auth/auth-utils';\n\nexport { authClient };\n\nasync function fetchAndStoreJWT(): Promise<string | null> {\n  try {\n    // Fetch JWT from our custom endpoint (uses session cookie)\n    const response = await fetch('/api/auth/jwt', {\n      credentials: 'include',\n    });\n    if (response.ok) {\n      const data = await response.json();\n      if (data.token) {\n        setToken(data.token);\n        return data.token;\n      }\n    }\n  } catch (error) {\n    console.error('Failed to fetch JWT token:', error);\n  }\n  return null;\n}\n\nexport class AuthService {\n  static async login(credentials: { email: string; password: string }) {\n    try {\n      const result = await authClient.signIn.email(credentials);\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Login failed');\n      }\n\n      if (result.data) {\n        // Fetch JWT token for backend API calls\n        const jwtToken = await fetchAndStoreJWT();\n        setSession({\n          user: result.data.user,\n          token: jwtToken || result.data.token,\n        });\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Login failed:', error);\n      throw error;\n    }\n  }\n\n  static async register(userData: { email: string; password: string }) {\n    try {\n      const result = await authClient.signUp.email({\n        email: userData.email,\n        password: userData.password,\n        name: userData.email.split('@')[0],\n      });\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Registration failed');\n      }\n\n      if (result.data) {\n        // Fetch JWT token for backend API calls\n        const jwtToken = await fetchAndStoreJWT();\n        setSession({\n          user: result.data.user,\n          token: jwtToken || result.data.token,\n        });\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Registration failed:', error);\n      throw error;\n    }\n  }\n\n  static async forgotPassword(email: string) {\n    const baseURL = process.env.NEXT_PUBLIC_BETTER_AUTH_URL || \"http://localhost:3000\";\n    const response = await fetch(`${baseURL}/api/auth/forget-password`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, redirectTo: '/reset-password' }),\n    });\n    if (!response.ok) {\n      throw new Error('Failed to send password reset email');\n    }\n    return response.json();\n  }\n\n  static async resetPassword(token: string, newPassword: string) {\n    const baseURL = process.env.NEXT_PUBLIC_BETTER_AUTH_URL || \"http://localhost:3000\";\n    const response = await fetch(`${baseURL}/api/auth/reset-password`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ token, newPassword }),\n    });\n    if (!response.ok) {\n      throw new Error('Failed to reset password');\n    }\n    return response.json();\n  }\n\n  static async logout() {\n    try {\n      await authClient.signOut();\n    } catch (error) {\n      console.error('Logout failed:', error);\n    } finally {\n      clearAuthSession();\n    }\n  }\n\n  static getCurrentSession() {\n    return getSession();\n  }\n\n  static async isAuthenticated(): Promise<boolean> {\n    const session = this.getCurrentSession();\n    return !!session?.user;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1667, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/hooks/use-auth.ts"],"sourcesContent":["// Authentication hook for managing auth state\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { AuthService } from '@/services/auth-service';\nimport { User } from '@/lib/types';\n\nexport interface UseAuthReturn {\n  user: User | null;\n  isAuthenticated: boolean;\n  loading: boolean;\n  login: (credentials: { email: string; password: string }) => Promise<any>;\n  register: (userData: { email: string; password: string }) => Promise<any>;\n  logout: () => Promise<void>;\n}\n\nexport const useAuth = (): UseAuthReturn => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    const checkAuthStatus = async () => {\n      try {\n        const session = AuthService.getCurrentSession();\n        if (session?.user && await AuthService.isAuthenticated()) {\n          setUser(session.user);\n          setIsAuthenticated(true);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuthStatus();\n  }, []);\n\n  const login = async (credentials: { email: string; password: string }) => {\n    setLoading(true);\n    try {\n      const result = await AuthService.login(credentials);\n\n      const session = AuthService.getCurrentSession();\n      if (session?.user) {\n        setUser(session.user);\n        setIsAuthenticated(true);\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const register = async (userData: { email: string; password: string }) => {\n    setLoading(true);\n    try {\n      const result = await AuthService.register(userData);\n\n      const session = AuthService.getCurrentSession();\n      if (session?.user) {\n        setUser(session.user);\n        setIsAuthenticated(true);\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Registration error:', error);\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const logout = async () => {\n    setLoading(true);\n    try {\n      await AuthService.logout();\n      setUser(null);\n      setIsAuthenticated(false);\n      router.push('/login');\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    user,\n    isAuthenticated,\n    loading,\n    login,\n    register,\n    logout,\n  };\n};\n"],"names":[],"mappings":";;;;AAAA,8CAA8C;AAC9C;AACA;AACA;;;;AAYO,MAAM,UAAU;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAc;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,6NAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,2JAAS;IAExB,IAAA,8NAAS,EAAC;QACR,MAAM,kBAAkB;YACtB,IAAI;gBACF,MAAM,UAAU,sKAAW,CAAC,iBAAiB;gBAC7C,IAAI,SAAS,QAAQ,MAAM,sKAAW,CAAC,eAAe,IAAI;oBACxD,QAAQ,QAAQ,IAAI;oBACpB,mBAAmB;gBACrB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sBAAsB;YACtC,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO;QACnB,WAAW;QACX,IAAI;YACF,MAAM,SAAS,MAAM,sKAAW,CAAC,KAAK,CAAC;YAEvC,MAAM,UAAU,sKAAW,CAAC,iBAAiB;YAC7C,IAAI,SAAS,MAAM;gBACjB,QAAQ,QAAQ,IAAI;gBACpB,mBAAmB;YACrB;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,WAAW;QACX,IAAI;YACF,MAAM,SAAS,MAAM,sKAAW,CAAC,QAAQ,CAAC;YAE1C,MAAM,UAAU,sKAAW,CAAC,iBAAiB;YAC7C,IAAI,SAAS,MAAM;gBACjB,QAAQ,QAAQ,IAAI;gBACpB,mBAAmB;YACrB;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,SAAS;QACb,WAAW;QACX,IAAI;YACF,MAAM,sKAAW,CAAC,MAAM;YACxB,QAAQ;YACR,mBAAmB;YACnB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 1759, "column": 0}, "map": {"version":3,"sources":["file:///D:/Muhammad%20Shariq/GIAIC/Hackathon/Hackathon%202/Phase3/frontend/app/chat/page.tsx"],"sourcesContent":["'use client';\n\n/**\n * Chat Page Component\n * Main page for the chat interface\n * Accepts optional conversation_id URL parameter\n */\n\nimport { useEffect, useState, Suspense } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { ChatInterface } from '@/components/ChatInterface';\nimport { useAuth } from '@/hooks/use-auth';\n\nexport const dynamic = 'force-dynamic';\n\nfunction ChatPageContent() {\n  const searchParams = useSearchParams();\n  // Extract conversation_id from URL parameter (T021)\n  // Validates UUID format before passing to ChatInterface\n  let conversationId: string | undefined = undefined;\n\n  if (searchParams) {\n    const idParam = searchParams.get('id');\n    if (idParam) {\n      // Basic UUID validation: must be 36 chars with hyphens\n      if (/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(idParam)) {\n        conversationId = idParam;\n      }\n    }\n  }\n\n  const { isAuthenticated, loading } = useAuth();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Show loading state while auth is being checked\n  if (loading || !mounted) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading chat...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n            Authentication Required\n          </h1>\n          <p className=\"text-gray-600 mb-6\">\n            Please log in to use the chat feature.\n          </p>\n          <a\n            href=\"/login\"\n            className=\"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n          >\n            Go to Login\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <header className=\"bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Todo Chat</h1>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Chat naturally to manage your tasks\n            </p>\n          </div>\n          <a\n            href=\"/dashboard\"\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <svg className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19V6l12-3v13M9 19H7a2 2 0 01-2-2m2 2h2a2 2 0 002-2M9 19l12-3\" />\n            </svg>\n            My Tasks\n          </a>\n        </div>\n      </header>\n\n      <main className=\"max-w-6xl mx-auto px-4 py-8\">\n        <ChatInterface conversationId={conversationId || undefined} />\n      </main>\n    </div>\n  );\n}\n\nexport default function ChatPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading...</p>\n          </div>\n        </div>\n      }\n    >\n      <ChatPageContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;;CAIC,GAED;AACA;AACA;AACA;AAXA;;;;;;AAaO,MAAM,UAAU;AAEvB,SAAS;IACP,MAAM,eAAe,IAAA,iKAAe;IACpC,oDAAoD;IACpD,wDAAwD;IACxD,IAAI,iBAAqC;IAEzC,IAAI,cAAc;QAChB,MAAM,UAAU,aAAa,GAAG,CAAC;QACjC,IAAI,SAAS;YACX,uDAAuD;YACvD,IAAI,kEAAkE,IAAI,CAAC,UAAU;gBACnF,iBAAiB;YACnB;QACF;IACF;IAEA,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,2IAAO;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IAEvC,IAAA,8NAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,iDAAiD;IACjD,IAAI,WAAW,CAAC,SAAS;QACvB,qBACE,0PAAC;YAAI,WAAU;sBACb,cAAA,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAI,WAAU;;;;;;kCACf,0PAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAEA,yCAAyC;IACzC,IAAI,CAAC,iBAAiB;QACpB,qBACE,0PAAC;YAAI,WAAU;sBACb,cAAA,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAGtD,0PAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAGlC,0PAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAO,WAAU;0BAChB,cAAA,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;;8CACC,0PAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,0PAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;sCAI5C,0PAAC;4BACC,MAAK;4BACL,WAAU;;8CAEV,0PAAC;oCAAI,WAAU;oCAAe,MAAK;oCAAO,SAAQ;oCAAY,QAAO;8CACnE,cAAA,0PAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;gCACjE;;;;;;;;;;;;;;;;;;0BAMZ,0PAAC;gBAAK,WAAU;0BACd,cAAA,0PAAC,yJAAa;oBAAC,gBAAgB,kBAAkB;;;;;;;;;;;;;;;;;AAIzD;AAEe,SAAS;IACtB,qBACE,0PAAC,6NAAQ;QACP,wBACE,0PAAC;YAAI,WAAU;sBACb,cAAA,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAI,WAAU;;;;;;kCACf,0PAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;kBAKnC,cAAA,0PAAC;;;;;;;;;;AAGP"}}]
}