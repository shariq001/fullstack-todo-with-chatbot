{"version":3,"sources":["../../../../../frontend/app/chat/page.tsx","../../../../../frontend/utils/chat.ts","../../../../../frontend/constants/chat.ts","../../../../../frontend/hooks/useChat.ts","../../../../../frontend/components/MessageList.tsx","../../../../../frontend/components/ChatInput.tsx","../../../../../frontend/components/ChatInterface.tsx"],"sourcesContent":["'use client';\n\n/**\n * Chat Page Component\n * Main page for the chat interface\n * Accepts optional conversation_id URL parameter\n */\n\nimport { useEffect, useState, Suspense } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { ChatInterface } from '@/components/ChatInterface';\nimport { useAuth } from '@/hooks/use-auth';\n\nexport const dynamic = 'force-dynamic';\n\nfunction ChatPageContent() {\n  const searchParams = useSearchParams();\n  // Extract conversation_id from URL parameter (T021)\n  // Validates UUID format before passing to ChatInterface\n  let conversationId: string | undefined = undefined;\n\n  if (searchParams) {\n    const idParam = searchParams.get('id');\n    if (idParam) {\n      // Basic UUID validation: must be 36 chars with hyphens\n      if (/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(idParam)) {\n        conversationId = idParam;\n      }\n    }\n  }\n\n  const { isAuthenticated, loading } = useAuth();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Show loading state while auth is being checked\n  if (loading || !mounted) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading chat...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n            Authentication Required\n          </h1>\n          <p className=\"text-gray-600 mb-6\">\n            Please log in to use the chat feature.\n          </p>\n          <a\n            href=\"/login\"\n            className=\"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n          >\n            Go to Login\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <header className=\"bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Todo Chat</h1>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Chat naturally to manage your tasks\n            </p>\n          </div>\n          <a\n            href=\"/dashboard\"\n            className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <svg className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19V6l12-3v13M9 19H7a2 2 0 01-2-2m2 2h2a2 2 0 002-2M9 19l12-3\" />\n            </svg>\n            My Tasks\n          </a>\n        </div>\n      </header>\n\n      <main className=\"max-w-6xl mx-auto px-4 py-8\">\n        <ChatInterface conversationId={conversationId || undefined} />\n      </main>\n    </div>\n  );\n}\n\nexport default function ChatPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading...</p>\n          </div>\n        </div>\n      }\n    >\n      <ChatPageContent />\n    </Suspense>\n  );\n}\n","/**\n * Chat Utilities - Pure functions for chat operations\n * No side effects; all functions are deterministic and testable\n */\n\n/**\n * Validates a chat message before sending.\n * Rules:\n * - Must not be empty\n * - Must not be only whitespace\n * - Must not exceed max length\n * @param message - Message content to validate\n * @param maxLength - Maximum message length (default: 5000)\n * @returns Object with valid flag and error message if invalid\n */\nexport function validateMessage(message: string, maxLength = 5000): {\n  valid: boolean;\n  error?: string;\n} {\n  if (!message) {\n    return { valid: false, error: 'Message cannot be empty' };\n  }\n\n  const trimmed = message.trim();\n  if (trimmed.length === 0) {\n    return { valid: false, error: 'Message cannot be only whitespace' };\n  }\n\n  if (trimmed.length > maxLength) {\n    return {\n      valid: false,\n      error: `Message exceeds maximum length of ${maxLength} characters`,\n    };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Formats an ISO 8601 timestamp to a human-readable string.\n * Example: \"2026-02-08T10:30:00Z\" -> \"10:30 AM\"\n * @param timestamp - ISO 8601 timestamp string\n * @param includeDate - Include date in output (default: false)\n * @returns Formatted timestamp string\n */\nexport function formatTimestamp(\n  timestamp: string,\n  includeDate = false\n): string {\n  try {\n    const date = new Date(timestamp);\n\n    if (includeDate) {\n      return date.toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n      });\n    }\n\n    return date.toLocaleString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  } catch (error) {\n    return timestamp; // Return original if parsing fails\n  }\n}\n\n/**\n * Generates a UUID v4 string for client-side message IDs.\n * Used to optimistically assign IDs before server confirmation.\n * @returns UUID v4 string\n */\nexport function generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\n * Categorizes HTTP errors and returns appropriate user-facing messages.\n * @param error - Error object with status code\n * @returns Object with error code, message, and suggested action\n */\nexport function handleChatError(error: unknown): {\n  code: string;\n  message: string;\n  action: string;\n} {\n  // Handle fetch/network errors\n  if (error instanceof TypeError) {\n    return {\n      code: 'NETWORK_ERROR',\n      message: 'Network connection failed. Please check your connection.',\n      action: 'retry',\n    };\n  }\n\n  // Handle custom error objects with status\n  if (typeof error === 'object' && error !== null && 'status' in error) {\n    const status = (error as Record<string, unknown>).status;\n\n    if (status === 400) {\n      return {\n        code: 'VALIDATION_ERROR',\n        message:\n          'Invalid message. Please check your input and try again.',\n        action: 'clarify',\n      };\n    }\n\n    if (status === 404) {\n      return {\n        code: 'NOT_FOUND',\n        message:\n          'Conversation not found. It may have been deleted. Start a new conversation.',\n        action: 'new',\n      };\n    }\n\n    if (status === 401) {\n      return {\n        code: 'UNAUTHORIZED',\n        message: 'Your session has expired. Please log in again.',\n        action: 'login',\n      };\n    }\n\n    if (status === 500) {\n      return {\n        code: 'SERVER_ERROR',\n        message:\n          'Server error. Please try again in a moment.',\n        action: 'retry',\n      };\n    }\n\n    if (status === 503) {\n      return {\n        code: 'SERVICE_UNAVAILABLE',\n        message: 'Service temporarily unavailable. Please try again later.',\n        action: 'retry',\n      };\n    }\n  }\n\n  // Handle timeout\n  if (error instanceof Error && error.message.includes('timeout')) {\n    return {\n      code: 'TIMEOUT',\n      message: 'Request took too long. Please try again.',\n      action: 'retry',\n    };\n  }\n\n  // Default unknown error\n  return {\n    code: 'UNKNOWN_ERROR',\n    message: 'An unexpected error occurred. Please try again.',\n    action: 'retry',\n  };\n}\n\n/**\n * Sanitizes message content to prevent XSS attacks.\n * Removes script tags and suspicious HTML.\n * @param content - Message content to sanitize\n * @returns Sanitized content\n */\nexport function sanitizeMessage(content: string): string {\n  // Basic HTML escape for user-provided content\n  const div = document.createElement('div');\n  div.textContent = content;\n  return div.innerHTML;\n}\n\n/**\n * Truncates message content to a reasonable length for display.\n * Used in message previews or lists.\n * @param content - Message content\n * @param maxLength - Maximum display length (default: 100)\n * @returns Truncated content with ellipsis if needed\n */\nexport function truncateMessage(content: string, maxLength = 100): string {\n  if (content.length <= maxLength) {\n    return content;\n  }\n  return content.substring(0, maxLength) + '...';\n}\n\n/**\n * Validates UUID v4 format.\n * Ensures conversation IDs are in valid UUID format before using them.\n * @param uuid - String to validate\n * @returns true if valid UUID v4 format, false otherwise\n */\nexport function isValidUUID(uuid: string): boolean {\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n  return uuidRegex.test(uuid);\n}\n","/**\n * Chat Constants - Configuration and message templates\n */\n\n// API Configuration\nexport const API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000';\nexport const CHAT_ENDPOINT = '/api/chat';\nexport const CHAT_API_URL = `${API_BASE_URL}${CHAT_ENDPOINT}`;\n\n// Timeouts and Limits (milliseconds)\nexport const REQUEST_TIMEOUT_MS = 30000; // 30 seconds\nexport const LOADING_FEEDBACK_MS = 500; // Show loading indicator after 500ms\nexport const MAX_MESSAGE_LENGTH = 5000;\nexport const RETRY_DELAY_MS = 1000;\nexport const MAX_RETRIES = 3;\n\n// Error Message Templates\nexport const ERROR_MESSAGES = {\n  EMPTY_MESSAGE: 'Message cannot be empty',\n  MESSAGE_TOO_LONG: 'Message exceeds maximum length',\n  NETWORK_ERROR: 'Network connection failed. Please check your connection.',\n  TIMEOUT: 'Request took too long. Please try again.',\n  VALIDATION_ERROR: 'Invalid message. Please check your input and try again.',\n  NOT_FOUND:\n    'Conversation not found. It may have been deleted. Start a new conversation.',\n  UNAUTHORIZED: 'Your session has expired. Please log in again.',\n  SERVER_ERROR: 'Server error. Please try again in a moment.',\n  SERVICE_UNAVAILABLE: 'Service temporarily unavailable. Please try again later.',\n  UNKNOWN_ERROR: 'An unexpected error occurred. Please try again.',\n  CONVERSATION_LOAD_FAILED: 'Failed to load conversation. Please try again.',\n} as const;\n\n// Success Message Templates\nexport const SUCCESS_MESSAGES = {\n  MESSAGE_SENT: 'Message sent',\n  CONVERSATION_CREATED: 'New conversation started',\n  CONVERSATION_LOADED: 'Conversation loaded',\n} as const;\n\n// Loading State Messages\nexport const LOADING_MESSAGES = {\n  SENDING: 'Sending message...',\n  LOADING_HISTORY: 'Loading conversation history...',\n  PROCESSING: 'Processing...',\n} as const;\n\n// UI Configuration\nexport const UI_CONFIG = {\n  ANIMATION_DURATION_MS: 300,\n  TOAST_DURATION_MS: 5000,\n  LOADING_SPINNER_SIZE: 'md' as const,\n  INPUT_PLACEHOLDER: 'Type your message here...',\n  SEND_BUTTON_TEXT: 'Send',\n  SENDING_BUTTON_TEXT: 'Sending...',\n} as const;\n\n// T031: Phase II Design System Colors\nexport const DESIGN_SYSTEM_COLORS = {\n  primary: 'blue-500',\n  secondary: 'gray-500',\n  success: 'green-500',\n  error: 'red-500',\n  warning: 'yellow-500',\n} as const;\n\n// Message Role Colors (Tailwind CSS classes) - T031: Design system\nexport const MESSAGE_ROLE_COLORS = {\n  user: 'bg-blue-100 text-blue-900 rounded-lg',\n  assistant: 'bg-gray-100 text-gray-900 rounded-lg',\n  system: 'bg-yellow-50 text-yellow-800 rounded-lg',\n} as const;\n\n// Message Role Alignment - T031: Consistent spacing\nexport const MESSAGE_ROLE_ALIGNMENT = {\n  user: 'justify-end',\n  assistant: 'justify-start',\n  system: 'justify-center',\n} as const;\n\n// T031: Design system spacing and typography\nexport const DESIGN_SYSTEM_SPACING = {\n  xs: '0.25rem',\n  sm: '0.5rem',\n  md: '1rem',\n  lg: '1.5rem',\n  xl: '2rem',\n} as const;\n\nexport const DESIGN_SYSTEM_TYPOGRAPHY = {\n  body: 'text-sm text-gray-900',\n  caption: 'text-xs text-gray-600',\n  heading: 'text-lg font-bold text-gray-900',\n} as const;\n\n// T031: Design system border styles\nexport const DESIGN_SYSTEM_BORDERS = {\n  light: 'border border-gray-200',\n  medium: 'border border-gray-300',\n  dark: 'border border-gray-400',\n} as const;\n\n// Local Storage Keys\nexport const STORAGE_KEYS = {\n  LAST_CONVERSATION_ID: 'chat_last_conversation_id',\n  CONVERSATIONS_CACHE: 'chat_conversations_cache',\n  USER_PREFERENCES: 'chat_user_preferences',\n} as const;\n\n// Feature Flags (for gradual rollout)\nexport const FEATURE_FLAGS = {\n  ENABLE_TOOL_DISPLAY: false, // Hide tool invocations by default\n  ENABLE_DEBUG_MODE: false, // Show debug info\n  ENABLE_STREAMING: true, // Stream responses\n  ENABLE_CONVERSATION_HISTORY: true, // Load previous conversations\n} as const;\n","/**\n * useChat Hook - Main API client hook for chat operations\n * Handles message sending, conversation loading, error management, and state\n */\n\nimport { useState, useCallback, useEffect } from 'react';\nimport type {\n  ChatMessage,\n  Conversation,\n  ChatRequest,\n  ChatResponse,\n  UseChatReturn,\n} from '@/types/chat';\nimport {\n  validateMessage,\n  handleChatError,\n  generateUUID,\n  isValidUUID,\n} from '@/utils/chat';\nimport {\n  CHAT_API_URL,\n  REQUEST_TIMEOUT_MS,\n  ERROR_MESSAGES,\n  STORAGE_KEYS,\n} from '@/constants/chat';\n\n/**\n * Main chat hook for sending messages and managing conversation state\n * @returns Chat state and methods\n */\nexport const useChat = (): UseChatReturn => {\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  /**\n   * Clear error state\n   */\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  /**\n   * Send a message to the API and update conversation state\n   * @param message - Message content to send\n   */\n  const sendMessage = useCallback(\n    async (message: string) => {\n      // Validate input\n      const validation = validateMessage(message);\n      if (!validation.valid) {\n        setError(validation.error || ERROR_MESSAGES.EMPTY_MESSAGE);\n        return;\n      }\n\n      clearError();\n      setIsLoading(true);\n\n      try {\n        // Create optimistic message for UI\n        const userMessage: ChatMessage = {\n          id: generateUUID(),\n          role: 'user',\n          content: message.trim(),\n          createdAt: new Date().toISOString(),\n          isLoading: false,\n        };\n\n        // Update conversation with user message\n        const updatedConversation: Conversation = {\n          ...(conversation || {\n            id: '',\n            messages: [],\n            isLoading: false,\n            createdAt: new Date().toISOString(),\n          }),\n          messages: [...(conversation?.messages || []), userMessage],\n          lastMessageAt: new Date().toISOString(),\n        };\n\n        setConversation(updatedConversation);\n        setInputValue(''); // Clear input immediately\n\n        // Add loading message\n        const loadingMessage: ChatMessage = {\n          id: generateUUID(),\n          role: 'assistant',\n          content: 'Typing...',\n          createdAt: new Date().toISOString(),\n          isLoading: true,\n        };\n\n        setConversation((prev) =>\n          prev\n            ? {\n                ...prev,\n                messages: [...prev.messages, loadingMessage],\n              }\n            : null\n        );\n\n        // Build request payload\n        const request: ChatRequest = {\n          message: message.trim(),\n          conversation_id: conversation?.id,\n        };\n\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(\n          () => controller.abort(),\n          REQUEST_TIMEOUT_MS\n        );\n\n        try {\n          // Call API\n          const response = await fetch(CHAT_API_URL, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              // JWT will be auto-injected by Next.js middleware if present\n            },\n            body: JSON.stringify(request),\n            signal: controller.signal,\n            credentials: 'include', // Include cookies for authentication\n          });\n\n          clearTimeout(timeoutId);\n\n          // Handle error responses\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            const errorObj = {\n              status: response.status,\n              ...errorData,\n            };\n\n            const { message: errorMessage } = handleChatError(errorObj);\n            throw new Error(errorMessage);\n          }\n\n          // Parse response\n          const data: ChatResponse = await response.json();\n\n          // Create assistant message\n          const assistantMessage: ChatMessage = {\n            id: generateUUID(),\n            role: 'assistant',\n            content: data.response,\n            toolName: data.toolName,\n            toolResult: data.toolResult,\n            createdAt: new Date().toISOString(),\n            isLoading: false,\n          };\n\n          // Update conversation with response\n          setConversation((prev) => {\n            if (!prev) {\n              return null;\n            }\n\n            // Replace loading message with actual response\n            const messages = prev.messages.slice(0, -1); // Remove loading message\n            messages.push(assistantMessage);\n\n            return {\n              ...prev,\n              id: data.conversation_id, // Update conversation ID if new\n              messages,\n              lastMessageAt: new Date().toISOString(),\n            };\n          });\n\n          // Save conversation ID and metadata to localStorage (T023)\n          if (data.conversation_id) {\n            try {\n              localStorage.setItem(\n                STORAGE_KEYS.LAST_CONVERSATION_ID,\n                JSON.stringify({\n                  id: data.conversation_id,\n                  lastAccessedAt: new Date().toISOString(),\n                })\n              );\n            } catch (storageError) {\n              // localStorage might be full or unavailable; fail silently\n              console.warn('Failed to save conversation to localStorage:', storageError);\n            }\n          }\n        } catch (fetchError) {\n          clearTimeout(timeoutId);\n\n          // Remove loading message on error\n          setConversation((prev) =>\n            prev\n              ? {\n                  ...prev,\n                  messages: prev.messages.slice(0, -1),\n                }\n              : null\n          );\n\n          if (fetchError instanceof Error) {\n            if (fetchError.name === 'AbortError') {\n              setError(ERROR_MESSAGES.TIMEOUT);\n            } else {\n              setError(fetchError.message);\n            }\n          } else {\n            setError(ERROR_MESSAGES.UNKNOWN_ERROR);\n          }\n        }\n      } catch (err) {\n        const { message: errorMessage } = handleChatError(err);\n        setError(errorMessage);\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [conversation, clearError]\n  );\n\n  /**\n   * Load conversation history from the backend\n   * @param conversationId - ID of conversation to load\n   * @returns Promise that resolves when conversation is loaded or error occurs\n   */\n  const loadConversationHistory = useCallback(\n    async (conversationId: string): Promise<ChatMessage[]> => {\n      // Validate conversation ID format\n      if (!conversationId || !isValidUUID(conversationId)) {\n        setError(ERROR_MESSAGES.NOT_FOUND);\n        return [];\n      }\n\n      setIsLoading(true);\n      clearError();\n\n      try {\n        // Create abort controller for timeout\n        const controller = new AbortController();\n        const timeoutId = setTimeout(\n          () => controller.abort(),\n          REQUEST_TIMEOUT_MS\n        );\n\n        try {\n          // Fetch conversation history from backend\n          // Uses GET request with conversation_id as query parameter\n          const response = await fetch(\n            `${CHAT_API_URL}?conversation_id=${encodeURIComponent(conversationId)}`,\n            {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              signal: controller.signal,\n              credentials: 'include', // Include cookies for authentication\n            }\n          );\n\n          clearTimeout(timeoutId);\n\n          // Handle error responses\n          if (!response.ok) {\n            if (response.status === 404) {\n              setError(ERROR_MESSAGES.NOT_FOUND);\n              // Clear invalid conversation from localStorage\n              localStorage.removeItem(STORAGE_KEYS.LAST_CONVERSATION_ID);\n            } else if (response.status === 401) {\n              setError(ERROR_MESSAGES.UNAUTHORIZED);\n            } else {\n              throw new Error(ERROR_MESSAGES.CONVERSATION_LOAD_FAILED);\n            }\n            return [];\n          }\n\n          // Parse response and validate structure\n          const data = await response.json();\n\n          if (data.messages && Array.isArray(data.messages)) {\n            // Create conversation object from loaded data\n            const loadedConversation: Conversation = {\n              id: conversationId,\n              messages: data.messages,\n              isLoading: false,\n              createdAt: data.createdAt || new Date().toISOString(),\n              lastMessageAt: data.lastMessageAt || new Date().toISOString(),\n            };\n\n            setConversation(loadedConversation);\n            return data.messages;\n          }\n\n          return [];\n        } catch (fetchError) {\n          clearTimeout(timeoutId);\n\n          if (fetchError instanceof Error) {\n            if (fetchError.name === 'AbortError') {\n              setError(ERROR_MESSAGES.TIMEOUT);\n            } else {\n              setError(fetchError.message);\n            }\n          } else {\n            setError(ERROR_MESSAGES.CONVERSATION_LOAD_FAILED);\n          }\n          return [];\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [clearError]\n  );\n\n  /**\n   * Get last conversation ID from localStorage with validation\n   * Handles both legacy (string) and new (JSON) formats\n   * @returns Conversation ID if valid, null otherwise\n   */\n  const getLastConversationIdFromStorage = useCallback((): string | null => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.LAST_CONVERSATION_ID);\n      if (!stored) {\n        return null;\n      }\n\n      // Try to parse as JSON (new format: { id, lastAccessedAt })\n      try {\n        const parsed = JSON.parse(stored);\n        if (parsed && typeof parsed === 'object' && 'id' in parsed) {\n          const id = parsed.id as string;\n          return isValidUUID(id) ? id : null;\n        }\n      } catch {\n        // Fall back to legacy string format\n        if (isValidUUID(stored)) {\n          return stored;\n        }\n      }\n\n      return null;\n    } catch {\n      return null;\n    }\n  }, []);\n\n  /**\n   * Load last conversation from localStorage on mount (T023)\n   * Only loads if:\n   * 1. No conversation_id in URL\n   * 2. localStorage has valid last conversation\n   * 3. No existing conversation in state\n   */\n  useEffect(() => {\n    // Note: This effect only runs on mount (empty dependencies)\n    // For URL-based conversation loading, see ChatInterface.tsx\n    if (!conversation) {\n      const lastConversationId = getLastConversationIdFromStorage();\n      if (lastConversationId) {\n        loadConversationHistory(lastConversationId);\n      }\n    }\n  }, []); // Only run on mount\n\n  return {\n    conversation,\n    inputValue,\n    setInputValue,\n    sendMessage,\n    loadConversationHistory,\n    error,\n    isLoading,\n    clearError,\n  };\n};\n","'use client';\n\n/**\n * MessageList Component\n * Displays messages in chronological order with role-based styling\n * Shows timestamps and loading indicators\n */\n\nimport { formatTimestamp } from '@/utils/chat';\nimport type { ChatMessage } from '@/types/chat';\nimport { MESSAGE_ROLE_ALIGNMENT, MESSAGE_ROLE_COLORS } from '@/constants/chat';\n\ninterface MessageListProps {\n  /** Array of messages to display */\n  messages: ChatMessage[];\n}\n\nexport const MessageList = ({ messages }: MessageListProps) => {\n  return (\n    <div className=\"space-y-4\">\n      {messages.map((message) => (\n        <Message key={message.id} message={message} />\n      ))}\n    </div>\n  );\n};\n\n/**\n * Individual Message Component\n */\ninterface MessageProps {\n  message: ChatMessage;\n}\n\nconst Message = ({ message }: MessageProps) => {\n  const alignmentClass = MESSAGE_ROLE_ALIGNMENT[message.role];\n  const bgColorClass = MESSAGE_ROLE_COLORS[message.role];\n\n  // T033: Responsive message width based on viewport\n  const messageWidthClass =\n    message.role === 'system'\n      ? 'max-w-full'\n      : 'max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg';\n\n  return (\n    <div className={`flex ${alignmentClass}`}>\n      <div\n        className={`${messageWidthClass} px-4 py-3 ${bgColorClass} ${\n          message.role === 'system' ? 'text-center text-sm italic' : ''\n        }`}\n        role=\"article\"\n        aria-label={message.isLoading ? 'Loading response' : 'Message'}\n      >\n        {/* T028: Tool execution progress - show tool name during execution */}\n        {message.isLoading && message.toolName && (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-xs font-medium\">Executing {message.toolName}...</span>\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-100\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-200\" />\n          </div>\n        )}\n\n        {/* Loading indicator without tool name */}\n        {message.isLoading && !message.toolName && (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-100\" />\n            <div className=\"animate-bounce h-2 w-2 bg-current rounded-full animation-delay-200\" />\n          </div>\n        )}\n\n        {/* Message content */}\n        {!message.isLoading && (\n          <>\n            <p className=\"text-sm break-words\">{message.content}</p>\n\n            {/* T028: Tool result display - show result after execution completes */}\n            {message.toolResult && (\n              <div className=\"mt-2 pt-2 border-t border-current border-opacity-20\">\n                <p className=\"text-xs font-semibold mb-1\">\n                  {message.toolName ? `${message.toolName} Result:` : 'Tool Result:'}\n                </p>\n                <pre className=\"text-xs overflow-x-auto bg-black bg-opacity-10 p-2 rounded\">\n                  {JSON.stringify(message.toolResult, null, 2)}\n                </pre>\n              </div>\n            )}\n\n            {/* Error (if present) */}\n            {message.error && (\n              <div\n                className=\"mt-2 pt-2 border-t border-red-300\"\n                role=\"alert\"\n              >\n                <p className=\"text-xs font-semibold text-red-600\">Error:</p>\n                <p className=\"text-xs text-red-600\">{message.error}</p>\n              </div>\n            )}\n\n            {/* Timestamp */}\n            <p className=\"text-xs opacity-70 mt-1\">\n              {formatTimestamp(message.createdAt)}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n","'use client';\n\n/**\n * ChatInput Component\n * Message input field with Send button\n * Handles validation and submission\n */\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { validateMessage } from '@/utils/chat';\nimport { UI_CONFIG, MAX_MESSAGE_LENGTH } from '@/constants/chat';\n\ninterface ChatInputProps {\n  /** Current input value */\n  value: string;\n\n  /** Callback when input changes */\n  onChange: (value: string) => void;\n\n  /** Callback when message is submitted */\n  onSubmit: (message: string) => Promise<void>;\n\n  /** Indicates if waiting for API response */\n  isLoading: boolean;\n\n  /** Disables input and button */\n  disabled?: boolean;\n}\n\nexport const ChatInput = ({\n  value,\n  onChange,\n  onSubmit,\n  isLoading,\n  disabled = false,\n}: ChatInputProps) => {\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    // Validate\n    const validation = validateMessage(value);\n    if (!validation.valid) {\n      setError(validation.error || 'Invalid message');\n      return;\n    }\n\n    setError(null);\n\n    // Submit\n    try {\n      await onSubmit(value);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : 'Failed to send message'\n      );\n    }\n  };\n\n  /**\n   * Handle key press (Enter to send)\n   */\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter' && !e.shiftKey && !disabled) {\n      e.preventDefault();\n      const form = inputRef.current?.form;\n      if (form) {\n        form.dispatchEvent(new Event('submit', { bubbles: true }));\n      }\n    }\n  };\n\n  /**\n   * Auto-resize textarea based on content\n   */\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n    }\n  }, [value]);\n\n  /**\n   * Focus input on mount\n   */\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\n      {/* Error display - T032: Accessibility with role=\"alert\" */}\n      {error && (\n        <div\n          className=\"text-sm text-red-600 bg-red-50 px-3 py-2 rounded border border-red-200\"\n          role=\"alert\"\n        >\n          {error}\n        </div>\n      )}\n\n      {/* Input field - T032: Enhanced accessibility */}\n      <div className=\"flex gap-3\">\n        <div className=\"flex-1 relative\">\n          <label htmlFor=\"message-input\" className=\"sr-only\">\n            Message input\n          </label>\n          <textarea\n            ref={inputRef}\n            id=\"message-input\"\n            value={value}\n            onChange={(e) => {\n              onChange(e.target.value);\n              setError(null); // Clear error on new input\n            }}\n            onKeyDown={handleKeyDown}\n            placeholder={UI_CONFIG.INPUT_PLACEHOLDER}\n            disabled={disabled}\n            maxLength={MAX_MESSAGE_LENGTH}\n            rows={1}\n            className={`w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all ${\n              disabled\n                ? 'bg-gray-100 text-gray-400 cursor-not-allowed opacity-50'\n                : 'bg-white text-gray-900'\n            } focus:opacity-100`}\n            aria-label=\"Message input\"\n            aria-disabled={disabled}\n            aria-describedby=\"character-count\"\n            data-testid=\"message-input\"\n          />\n        </div>\n\n        {/* Send button - T027, T032: Enhanced button with loading state and accessibility */}\n        <button\n          type=\"submit\"\n          disabled={disabled || !value.trim()}\n          className={`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-offset-2 ${\n            disabled || !value.trim()\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 focus:ring-blue-500'\n          }`}\n          aria-label={isLoading ? 'Sending message' : 'Send message'}\n          aria-busy={isLoading}\n          data-testid=\"send-button\"\n        >\n          {isLoading ? (\n            <span className=\"flex items-center gap-2\">\n              <span className=\"inline-block\" aria-hidden=\"true\">\n                <svg\n                  className=\"w-4 h-4 animate-spin\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                  />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n              </span>\n              {UI_CONFIG.SENDING_BUTTON_TEXT}\n            </span>\n          ) : (\n            UI_CONFIG.SEND_BUTTON_TEXT\n          )}\n        </button>\n      </div>\n\n      {/* Character count - T032: Accessibility with aria-live */}\n      <div className=\"flex items-center justify-between\">\n        <p\n          id=\"character-count\"\n          className=\"text-xs text-gray-500\"\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          {value.length}/{MAX_MESSAGE_LENGTH} characters\n        </p>\n        {value.length > MAX_MESSAGE_LENGTH * 0.9 && (\n          <p className=\"text-xs text-yellow-600\" role=\"status\">\n            You are approaching the character limit\n          </p>\n        )}\n      </div>\n\n      {/* Keyboard help text - T032: Accessibility */}\n      <p className=\"text-xs text-gray-400 italic\">\n        Press <kbd className=\"bg-gray-100 px-2 py-1 rounded text-gray-700\">Enter</kbd> to send,{' '}\n        <kbd className=\"bg-gray-100 px-2 py-1 rounded text-gray-700\">Shift+Enter</kbd> for new line\n      </p>\n    </form>\n  );\n};\n","'use client';\n\n/**\n * ChatInterface Component\n * Main chat UI component that combines MessageList and ChatInput\n * Manages conversation state and auto-scrolling\n */\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useChat } from '@/hooks/useChat';\nimport { MessageList } from '@/components/MessageList';\nimport { ChatInput } from '@/components/ChatInput';\nimport type { Conversation } from '@/types/chat';\n\ninterface ChatInterfaceProps {\n  /** Optional initial conversation ID to load */\n  conversationId?: string;\n}\n\nexport const ChatInterface = ({ conversationId }: ChatInterfaceProps) => {\n  const router = useRouter();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const {\n    conversation,\n    inputValue,\n    setInputValue,\n    sendMessage,\n    loadConversationHistory,\n    error,\n    isLoading,\n    clearError,\n  } = useChat();\n\n  const [hasLoadedHistory, setHasLoadedHistory] = useState(false);\n\n  /**\n   * Load conversation history on component mount or when conversation ID changes (T022)\n   * Handles:\n   * - Loading history when conversationId is provided\n   * - Switching conversations when conversationId URL parameter changes\n   * - Clearing state for new conversations (id=null)\n   * - No duplicate requests via hasLoadedHistory flag\n   */\n  useEffect(() => {\n    // Track if component is still mounted to prevent state updates after unmount\n    let isMounted = true;\n\n    const loadHistory = async () => {\n      if (!conversationId) {\n        // New conversation (no ID) - reset state\n        if (isMounted) {\n          setHasLoadedHistory(false);\n        }\n        return;\n      }\n\n      // Only load if we haven't already loaded this conversation\n      if (hasLoadedHistory && conversation?.id === conversationId) {\n        return;\n      }\n\n      try {\n        // Load conversation history from backend\n        await loadConversationHistory(conversationId);\n\n        if (isMounted) {\n          setHasLoadedHistory(true);\n        }\n      } catch (err) {\n        // Error handling is done in loadConversationHistory\n        if (isMounted) {\n          setHasLoadedHistory(true); // Mark as attempted to prevent retries\n        }\n      }\n    };\n\n    loadHistory();\n\n    // Cleanup on unmount: prevent state updates after unmount\n    return () => {\n      isMounted = false;\n    };\n  }, [conversationId, conversation?.id, hasLoadedHistory, loadConversationHistory]);\n\n  /**\n   * Auto-scroll to bottom when messages change\n   */\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [conversation?.messages]);\n\n  /**\n   * Update URL when conversation ID is established\n   */\n  useEffect(() => {\n    if (conversation?.id && conversation.id !== conversationId) {\n      router.push(`/chat?id=${conversation.id}`, { scroll: false });\n    }\n  }, [conversation?.id, conversationId, router]);\n\n  /**\n   * Handle message submission\n   */\n  const handleSubmit = async (message: string) => {\n    if (message.trim()) {\n      await sendMessage(message);\n    }\n  };\n\n  return (\n    <div\n      className=\"flex flex-col h-[calc(100vh-200px)] bg-white rounded-lg border border-gray-200 shadow-sm\"\n      role=\"region\"\n      aria-label=\"Chat interface\"\n    >\n      {/* Messages Container - T029, T031, T033: Design system styling with responsive design */}\n      <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 bg-gray-50 max-h-screen\">\n        {isLoading && (!conversation || conversation.messages.length === 0) ? (\n          // T026, T030: Loading state while fetching conversation history\n          <div className=\"flex items-center justify-center h-full text-center\">\n            <div>\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600\"></div>\n              </div>\n              <p className=\"text-gray-600 font-medium\">Loading conversation...</p>\n            </div>\n          </div>\n        ) : !conversation || conversation.messages.length === 0 ? (\n          // Empty state for new conversation - T031: Design system\n          <div className=\"flex items-center justify-center h-full text-center\">\n            <div className=\"max-w-md\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-3\">\n                Start a New Conversation\n              </h2>\n              <p className=\"text-gray-600 mb-4\">\n                Chat naturally to manage your tasks. Try asking something like:\n              </p>\n              <ul className=\"text-sm text-gray-500 space-y-1 mb-4\">\n                <li>\"Add a task: buy milk\"</li>\n                <li>\"List all my tasks\"</li>\n                <li>\"Mark task as done\"</li>\n              </ul>\n            </div>\n          </div>\n        ) : (\n          // Display loaded messages - T031: Message styling\n          <>\n            <MessageList messages={conversation.messages} />\n            <div ref={messagesEndRef} />\n          </>\n        )}\n      </div>\n\n      {/* Error Display - T031: Design system error styling */}\n      {error && (\n        <div className=\"px-6 py-4 bg-red-50 border-t border-red-200\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-medium text-red-900\">{error}</p>\n            </div>\n            <button\n              onClick={clearError}\n              className=\"ml-2 inline-flex text-red-400 hover:text-red-600 focus:outline-none transition-colors\"\n              aria-label=\"Close error message\"\n            >\n              <span className=\"sr-only\">Close</span>\n              <svg\n                className=\"h-5 w-5\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Input Container - T027, T029, T031: Enhanced styling and accessibility */}\n      <div className=\"border-t border-gray-200 p-6 bg-white\">\n        <ChatInput\n          value={inputValue}\n          onChange={setInputValue}\n          onSubmit={handleSubmit}\n          isLoading={isLoading}\n          disabled={isLoading}\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}